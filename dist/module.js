define(["@grafana/data","@grafana/ui","lodash","react","@emotion/react","@grafana/runtime","rxjs"],((e,t,r,n,o,i,a)=>(()=>{"use strict";var s={429:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(942),o=r.n(n),i=r(278),a=r.n(i)()(o());a.push([e.id,".credentials__container {\n  height: 200px;\n  width: 640px;\n}\n\n.credentials__textarea {\n  height: 150px;\n}\n","",{version:3,sources:["webpack://./components/config-editor/ConfigEditor.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,YAAY;AACd;;AAEA;EACE,aAAa;AACf",sourcesContent:[".credentials__container {\n  height: 200px;\n  width: 640px;\n}\n\n.credentials__textarea {\n  height: 150px;\n}\n"],sourceRoot:""}]);const s=a},587:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(942),o=r.n(n),i=r(278),a=r.n(i)()(o());a.push([e.id,".padding-left-20 {\n    padding-left: 20px;\n}\n","",{version:3,sources:["webpack://./styles/styles.css"],names:[],mappings:"AAAA;IACI,kBAAkB;AACtB",sourcesContent:[".padding-left-20 {\n    padding-left: 20px;\n}\n"],sourceRoot:""}]);const s=a},278:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);n&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},942:e=>{e.exports=function(e){var t=e[1],r=e[3];if(!r)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),i="/*# ".concat(o," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},292:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},a=[],s=0;s<e.length;s++){var l=e[s],c=n.base?l[0]+n.base:l[0],u=i[c]||0,p="".concat(c," ").concat(u);i[c]=u+1;var d=r(p),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(m);else{var f=o(m,n);n.byIndex=s,t.splice(s,0,{identifier:p,updater:f,references:1})}a.push(p)}return a}function o(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=r(i[a]);t[s].references--}for(var l=n(e,o),c=0;c<i.length;c++){var u=r(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},383:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},88:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},884:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},893:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},997:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},89:e=>{e.exports=o},781:t=>{t.exports=e},531:e=>{e.exports=i},7:e=>{e.exports=t},241:e=>{e.exports=r},959:e=>{e.exports=n},269:e=>{e.exports=a}},l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={id:e,exports:{}};return s[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nc=void 0;var u={};return(()=>{c.r(u),c.d(u,{plugin:()=>nt});var e,t=c(781),r=c(7),n=c(241),o=c(959),i=c.n(o);!function(e){e.ClientSecret="clientSecret",e.Host="host",e.AccessToken="accessToken",e.ClientToken="clientToken"}(e||(e={}));const a=["clientSecret","host","accessToken","clientToken"];var s=c(292),l=c.n(s),p=c(893),d=c.n(p),m=c(383),f=c.n(m),y=c(884),g=c.n(y),h=c(88),v=c.n(h),b=c(997),O=c.n(b),E=c(429),S={};function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){w(e,t,r[t])}))}return e}function k(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}S.styleTagTransform=O(),S.setAttributes=g(),S.insert=f().bind(null,"head"),S.domAPI=d(),S.insertStyleElement=v(),l()(E.A,S),E.A&&E.A.locals&&E.A.locals;var A=c(587),P={};P.styleTagTransform=O(),P.setAttributes=g(),P.insert=f().bind(null,"head"),P.domAPI=d(),P.insertStyleElement=v(),l()(A.A,P),A.A&&A.A.locals&&A.A.locals;const x=e=>e,T=e=>e.map((({name:e})=>I(e))),j=(e=[],t=x)=>e.map((e=>I(e,t))),I=(e,t=x)=>({label:t(e),value:e}),D=e=>j([...Object.values(e)],_),_=e=>{const t=e.replace(/_/g," ").toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},F=e=>(0,n.uniq)(e.map((e=>e.split(","))).flat().filter((e=>!(0,n.isEmpty)(e)))),N=({value:e="",label:t,items:r=[]})=>({value:e,label:null!=t?t:e,items:null==r?void 0:r.map(N)}),M=25,R=50;var B;!function(e){e.Dimension="Dimension",e.Metric="Metric"}(B||(B={}));const L=D(B),q=(0,n.groupBy)(L,"value");var U,H;!function(e){e.InList="IN_LIST",e.NotInList="NOT_IN_LIST",e.MatchRegExp="MATCH_REGEXP",e.NotMatchRegExp="NOT_MATCH_REGEXP",e.BeginsWith="BEGINS_WITH",e.NotBeginsWith="NOT_BEGINS_WITH",e.EndsWith="ENDS_WITH",e.NotEndsWith="NOT_ENDS_WITH",e.Contains="CONTAINS",e.NotContains="NOT_CONTAINS",e.Exact="EXACT"}(U||(U={})),function(e){e.Text="TEXT",e.Enum="ENUM"}(H||(H={}));const G=D(U),V=j(["IN_LIST","NOT_IN_LIST"],_);var W;!function(e){e.Equal="EQUAL",e.NotEqual="NOT_EQUAL",e.LessThan="LESS_THAN",e.GreaterThan="GREATER_THAN"}(W||(W={}));const z=D(W);var $;!function(e){e.Ascending="ASCENDING",e.Descending="DESCENDING"}($||($={}));const X=D($);function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Y(e,t,r[t])}))}return e}function J(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function K({model:e,names:t,operators:a,multiExpressions:s,onChange:l}){const c=s?i().createElement(r.InlineField,null,i().createElement(r.TagsInput,{placeholder:"Expressions",width:R,tags:e.expressions,onChange:t=>l(J(Q({},e),{expressions:F(t)}))})):i().createElement(r.InlineField,null,i().createElement(r.Input,{placeholder:"Expression",width:R,value:(0,n.first)(e.expressions),onChange:t=>l(J(Q({},e),{expressions:[t.target.value]}))}));return i().createElement(o.Fragment,null,i().createElement(r.InlineField,null,i().createElement(r.Select,{placeholder:"Name",isClearable:!1,options:t,width:M,value:e.name,onChange:t=>l(J(Q({},e),{name:t}))})),i().createElement(r.InlineField,null,i().createElement(r.Select,{placeholder:"Operator",isClearable:!1,width:M,options:a,value:e.operator,onChange:t=>l(J(Q({},e),{operator:t}))})),c)}class Z{static creteEmptyFilter(e){return{type:L[0],query:{name:e,operator:G[0],expressions:[]}}}static creteEmptySortBy(e){return{type:L[0],query:{name:e,sortOrder:X[0]}}}static toValues(e){return e.map((({value:e})=>e)).filter((e=>e))}static toFilterFormModels(e=[],t,r){return null==e?void 0:e.map((e=>{var o;const i=e.dimensionName||e.metricName,a=Z.guessFilterType(i,t,r);return a?{type:q[a][0],query:{name:i?I(i):void 0,operator:e.operator?I(e.operator,_):void 0,expressions:((null===(o=e.expressions)||void 0===o?void 0:o.length)?e.expressions:[e.expression]).filter((e=>!(0,n.isUndefined)(e))).map((e=>`${e}`))}}:{}})).filter((e=>!(0,n.isEmpty)(e)))}static toSortBysFormModel(e=[],t,r){return null==e?void 0:e.map((e=>{const n=Z.guessFilterType(e.name,t,r);return n?{type:q[n][0],query:{name:e.name?I(e.name):void 0,sortOrder:e.sortOrder?I(e.sortOrder,_):void 0}}:{}})).filter((e=>!(0,n.isEmpty)(e)))}static guessFilterType(e,t,r){if(!(0,n.isUndefined)(e))return t.includes(e)?B.Dimension:r.includes(e)?B.Metric:void 0}static toFilterQueries(e){return e.map((({type:e,query:{name:t,operator:r,expressions:o}})=>{const i={operator:null==r?void 0:r.value};return e.value===B.Dimension?((0,n.set)(i,"dimensionName",null==t?void 0:t.value),(0,n.set)(i,"expressions",Z.toExpressions(o))):e.value===B.Metric&&((0,n.set)(i,"metricName",null==t?void 0:t.value),(0,n.set)(i,"expression",Z.toExpression((0,n.first)(o)))),i}))}static toExpressions(e=[]){return e.map((e=>Z.toExpression(e)))}static toExpression(e=""){let t=Number(e);return isNaN(t)?e:t}static toSortByQueries(e){return e.map((({query:{name:e,sortOrder:t}})=>({name:null==e?void 0:e.value,sortOrder:null==t?void 0:t.value})))}static getDimensionsOperatorsOptions({query:{name:e}},t){const r=t.dimensions.find((t=>t.name===(null==e?void 0:e.value)));return(null==r?void 0:r.filterType)===H.Enum||(null==r?void 0:r.authorizable)?V:G}static getIntersectedModelOptions(e,t){const r=e.filter((e=>Z.VARIABLE_REGEX.test(e)));return[...(0,n.intersection)(e,t.map((({name:e})=>e))),...r||[]]}}var ee,te,re;function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ne(e,t,r[t])}))}return e}function ie(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function ae({model:e,discoveryApiModel:t,dimensions:n,metrics:o,onChange:a}){var s;const l=function(e,t,n,o,a,s){switch(e){case B.Dimension:return i().createElement(K,{model:o.query,names:t,operators:Z.getDimensionsOperatorsOptions(o,a),multiExpressions:!0,onChange:e=>s(ie(oe({},o),{query:e}))});case B.Metric:return i().createElement(K,{model:o.query,names:n,operators:z,multiExpressions:!1,onChange:e=>s(ie(oe({},o),{query:e}))});default:return i().createElement(r.InlineField,null,i().createElement("span",null,"Not implemented yet"))}}(null===(s=e.type)||void 0===s?void 0:s.value,n,o,e,t,a);return i().createElement(r.InlineFieldRow,{className:"padding-left-20"},i().createElement(r.InlineField,null,i().createElement(r.Select,{isClearable:!1,width:M,options:L,value:e.type,onChange:e=>{let t={};e.value===B.Dimension?t=Z.creteEmptyFilter(n[0]):e.value===B.Metric&&(t=Z.creteEmptyFilter(o[0])),a(ie(oe({},t),{type:e}))}})),l)}function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},se.apply(null,arguments)}function le(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}re=/\${.+}/gm,(te="VARIABLE_REGEX")in(ee=Z)?Object.defineProperty(ee,te,{value:re,enumerable:!0,configurable:!0,writable:!0}):ee[te]=re;var ce=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ue=le((function(e){return ce.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),pe=c(89),de=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},me={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function fe(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var ye=/[A-Z]|^ms/g,ge=/_EMO_([^_]+?)_([^]*?)_EMO_/g,he=function(e){return 45===e.charCodeAt(1)},ve=function(e){return null!=e&&"boolean"!=typeof e},be=fe((function(e){return he(e)?e:e.replace(ye,"-$&").toLowerCase()})),Oe=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(ge,(function(e,t,r){return Se={name:t,styles:r,next:Se},t}))}return 1===me[e]||he(e)||"number"!=typeof t||0===t?t:t+"px"};function Ee(e,t,r){if(null==r)return"";var n=r;if(void 0!==n.__emotion_styles)return n;switch(typeof r){case"boolean":return"";case"object":var o=r;if(1===o.anim)return Se={name:o.name,styles:o.styles,next:Se},o.name;var i=r;if(void 0!==i.styles){var a=i.next;if(void 0!==a)for(;void 0!==a;)Se={name:a.name,styles:a.styles,next:Se},a=a.next;return i.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=Ee(e,t,r[o])+";";else for(var i in r){var a=r[i];if("object"!=typeof a){var s=a;null!=t&&void 0!==t[s]?n+=i+"{"+t[s]+"}":ve(s)&&(n+=be(i)+":"+Oe(i,s)+";")}else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=Ee(e,t,a);switch(i){case"animation":case"animationName":n+=be(i)+":"+l+";";break;default:n+=i+"{"+l+"}"}}else for(var c=0;c<a.length;c++)ve(a[c])&&(n+=be(i)+":"+Oe(i,a[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var s=Se,l=r(e);return Se=s,Ee(e,t,l)}}var c=r;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var Se,we=/label:\s*([^\s;{]+)\s*(;|$)/g,Ce=!!o.useInsertionEffect&&o.useInsertionEffect,ke=Ce||function(e){return e()},Ae=(Ce||o.useLayoutEffect,ue),Pe=function(e){return"theme"!==e},xe=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?Ae:Pe},Te=function(e,t,r){var n;if(t){var o=t.shouldForwardProp;n=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof n&&r&&(n=e.__emotion_forwardProp),n},je=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return de(t,r,n),ke((function(){return function(e,t,r){de(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+n:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}(t,r,n)})),null},Ie=function e(t,r){var n,i,a=t.__emotion_real===t,s=a&&t.__emotion_base||t;void 0!==r&&(n=r.label,i=r.target);var l=Te(t,r,a),c=l||xe(s),u=!c("as");return function(){var p=arguments,d=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&d.push("label:"+n+";"),null==p[0]||void 0===p[0].raw)d.push.apply(d,p);else{d.push(p[0][0]);for(var m=p.length,f=1;f<m;f++)d.push(p[f],p[0][f])}var y=(0,pe.withEmotionCache)((function(e,t,r){var n,a,p,m,f=u&&e.as||s,y="",g=[],h=e;if(null==e.theme){for(var v in h={},e)h[v]=e[v];h.theme=o.useContext(pe.ThemeContext)}"string"==typeof e.className?(n=t.registered,a=g,p=e.className,m="",p.split(" ").forEach((function(e){void 0!==n[e]?a.push(n[e]+";"):e&&(m+=e+" ")})),y=m):null!=e.className&&(y=e.className+" ");var b=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,o="";Se=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,o+=Ee(r,t,i)):o+=i[0];for(var a=1;a<e.length;a++)o+=Ee(r,t,e[a]),n&&(o+=i[a]);we.lastIndex=0;for(var s,l="";null!==(s=we.exec(o));)l+="-"+s[1];var c=function(e){for(var t,r=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:Se}}(d.concat(g),t.registered,h);y+=t.key+"-"+b.name,void 0!==i&&(y+=" "+i);var O=u&&void 0===l?xe(f):c,E={};for(var S in e)u&&"as"===S||O(S)&&(E[S]=e[S]);return E.className=y,E.ref=r,o.createElement(o.Fragment,null,o.createElement(je,{cache:t,serialized:b,isStringTag:"string"==typeof f}),o.createElement(f,E))}));return y.displayName=void 0!==n?n:"Styled("+("string"==typeof s?s:s.displayName||s.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=s,y.__emotion_styles=d,y.__emotion_forwardProp=l,Object.defineProperty(y,"toString",{value:function(){return"."+i}}),y.withComponent=function(t,n){return e(t,se({},r,n,{shouldForwardProp:Te(y,n,!0)})).apply(void 0,d)},y}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Ie[e]=Ie(e)}));const De=Ie.div`
    display: flex;
    align-items: center;
    height: 32px;
`;function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe({fieldLabel:e,fieldTooltip:t,resource:n,rows:a,modelProvider:s,onChange:l,Editor:c}){return i().createElement(o.Fragment,null,i().createElement(r.InlineFieldRow,null,i().createElement(r.InlineField,{label:e,tooltip:t,labelWidth:M},i().createElement(De,null,(null==a?void 0:a.length)?i().createElement(r.IconButton,{name:"trash-alt",tooltip:"Remove all",onClick:()=>l([])}):"",i().createElement(r.IconButton,{name:"plus-circle",tooltip:`Add new ${n}`,onClick:()=>l([...a,s()])})))),a.map(((e,t)=>i().createElement(r.InlineFieldRow,{key:t},c(e,t,(e=>((e,t)=>{l(a.map(((r,n)=>n===t?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_e(e,t,r[t])}))}return e}({},r,e):r)))})(e,t))),i().createElement(r.InlineField,null,i().createElement(De,null,i().createElement(r.IconButton,{name:"minus-circle",tooltip:`Remove ${n}`,onClick:()=>(e=>{const t=[...a];t.splice(e,1),l(t)})(t)})))))))}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ne(e,t,r[t])}))}return e}function Re(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Be({model:e,names:t,onChange:n}){return i().createElement(o.Fragment,null,i().createElement(r.InlineField,null,i().createElement(r.Select,{placeholder:"Name",isClearable:!1,width:M,options:t,value:e.name,onChange:t=>n(Re(Me({},e),{name:t}))})),i().createElement(r.InlineField,null,i().createElement(r.Select,{placeholder:"Sort order",isClearable:!1,width:M,options:X,value:e.sortOrder,onChange:t=>n(Re(Me({},e),{sortOrder:t}))})))}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Le(e,t,r[t])}))}return e}function Ue(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function He({model:e,dimensions:t,metrics:n,onChange:o}){var a;const s=function(e,t,n,o,a){switch(e){case B.Dimension:return i().createElement(Be,{model:o.query,names:t,onChange:e=>a(Ue(qe({},o),{query:e}))});case B.Metric:return i().createElement(Be,{model:o.query,names:n,onChange:e=>a(Ue(qe({},o),{query:e}))});default:return i().createElement(r.InlineField,null,i().createElement("span",null,"Not implemented yet"))}}(null===(a=e.type)||void 0===a?void 0:a.value,t,n,e,o);return i().createElement(r.InlineFieldRow,{className:"padding-left-20"},i().createElement(r.InlineField,null,i().createElement(r.Select,{isClearable:!1,width:M,options:L,value:e.type,onChange:e=>{let r={};e.value===B.Dimension?r=Z.creteEmptySortBy(t[0]):e.value===B.Metric&&(r=Z.creteEmptySortBy(n[0])),o(Ue(qe({},r),{type:e}))}})),s)}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve({query:e,onChange:t,onRunQuery:a,model:s}){const{defaults:{defaultMetrics:l=[],defaultDimensions:c=[],defaultSortBys:u=[]}}=s,p=T(s.dimensions),d=c?j(c):[],m=T(s.metrics),f=l?j(l):[],y=Z.toValues(p),g=Z.toValues(m),h=u?Z.toSortBysFormModel(u,y,g):[],[v,b]=(0,o.useState)(s.dimensions?(0,n.isNil)(e.dimensions)?d:j(Z.getIntersectedModelOptions(e.dimensions,s.dimensions)):[]),[O,E]=(0,o.useState)(s.metrics?(0,n.isNil)(e.metrics)?f:j(Z.getIntersectedModelOptions(e.metrics,s.metrics)):[]),[S,w]=(0,o.useState)(s.metrics||s.dimensions?Z.toFilterFormModels(e.filters,y,g):[]),[C,k]=(0,o.useState)(s.metrics&&s.dimensions?(0,n.isNil)(e.sortBys)?h:Z.toSortBysFormModel(e.sortBys,y,g):[]),[A,P]=(0,o.useState)((0,n.isEmpty)(v)&&(0,n.isEmpty)(O)),[x,I]=(0,o.useState)(!e.dimensions&&!e.metrics),D=(e,t)=>{P((0,n.isEmpty)(e)&&(0,n.isEmpty)(t)),I(!1)};return i().createElement("div",null,x&&i().createElement(r.Alert,{title:"Default values",severity:"info"},i().createElement(r.VerticalGroup,null,"Default values have been set for the form since the panel was opened for the first time or data for query was not saved.")),i().createElement(r.InlineField,{label:"Dimensions",labelWidth:M,tooltip:"Array of dimensions for grouping results (i.e.['time5minutes', 'cpcode']). Maximum number of dimensions: 4."},i().createElement(r.MultiSelect,{isClearable:!0,width:R,options:p,value:v,allowCustomValue:!0,onChange:e=>{b(e),D(e,O)}})),i().createElement(r.InlineField,{label:"Metrics",labelWidth:M,tooltip:"Array of metrics requested (i.e.: ['edgeBytesSum', 'originHitsSum'])."},i().createElement(r.MultiSelect,{isClearable:!0,width:R,options:m,value:O,allowCustomValue:!0,onChange:e=>{E(e),D(v,e)}})),i().createElement(Fe,{fieldLabel:"Filters",fieldTooltip:"Filters used to narrow down the results of the data. Filters are specified in terms of dimensions or metrics.",resource:"Filter",rows:S,onChange:e=>{w(e),D(v,O)},modelProvider:()=>Z.creteEmptyFilter(p[0]),Editor:(e,t,r)=>i().createElement(ae,{key:t,model:e,dimensions:p,metrics:m,discoveryApiModel:s,onChange:e=>r(e,t)})}),i().createElement(Fe,{fieldLabel:"Sort Bys",fieldTooltip:"Set sortBy settings for multiple columns. If not specified, the default values are used.",resource:"Sort By",rows:C,onChange:e=>{k(e),D(v,O)},modelProvider:()=>Z.creteEmptySortBy(v[0]),Editor:(e,t,r)=>i().createElement(He,{key:t,model:e,dimensions:v,metrics:O,onChange:e=>r(e,t)})}),i().createElement(r.InlineFieldRow,null,i().createElement(r.InlineField,null,i().createElement(r.Button,{fill:"outline",type:"reset",variant:"destructive",onClick:()=>{b([]),E([]),w([]),k([]),D([],[])}},"Clear")),i().createElement(r.InlineField,{disabled:A},i().createElement(r.Button,{type:"submit",variant:"primary",onClick:()=>{const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ge(e,t,r[t])}))}return e}({},e);r.dimensions=Z.toValues(v),r.metrics=Z.toValues(O),r.filters=Z.toFilterQueries(S),r.sortBys=Z.toSortByQueries(C),t(r),a(),I(!1)}},"Apply")),i().createElement(r.InlineField,null,i().createElement(r.Button,{type:"reset",variant:"secondary",onClick:()=>{E(f),b(d),k(h),D(d,f)}},"Restore defaults"))))}var We=c(531),ze=c(269);const $e={metrics:[],dimensions:[],defaults:{},refId:""};var Xe;!function(e){e.STRING="STRING",e.LONG="LONG",e.DOUBLE="DOUBLE",e.TIMESTAMP_SEC="TIMESTAMP_SEC",e.DATE_ISO8601="DATE_ISO8601",e.TIMESTAMP_MS="TIMESTAMP_MS"}(Xe||(Xe={}));const Ye=["TIMESTAMP_SEC","DATE_ISO8601","TIMESTAMP_MS"];var Qe;function Je(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function Ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ke(e,t,r[t])}))}return e}!function(e){e.Success="success",e.Error="error"}(Qe||(Qe={}));class et extends t.DataSourceVariableSupport{getDefaultQuery(){return{reportLink:"",dimensions:[],metrics:[],filters:[],sortBys:[]}}getType(){return t.VariableSupportType.Custom}constructor({query:e,id:t}){super(),Ke(this,"query",void 0),Ke(this,"editor",{}),Ke(this,"id",void 0),this.query=e,this.id=t}}class tt extends We.DataSourceWithBackend{static discoveryApi(e,t){return tt.cachedDiscoveryAPIMap.has(t)?(0,ze.of)(tt.cachedDiscoveryAPIMap.get(t)).pipe((0,ze.delay)(tt.DISCOVERY_CACHE_RETURN_DELAY)):tt.makeBackendSrvCall({url:`${tt.getBackendDataSourceUrl(e)}/${tt.DISCOVERY}`,params:{targetUrl:t}}).pipe((0,ze.tap)((e=>tt.cachedDiscoveryAPIMap.set(t,e))))}static reportsApi(e){return tt.makeBackendSrvCall({url:`${tt.getBackendDataSourceUrl(e)}/${tt.REPORTS}`})}static makeBackendSrvCall(e){return(0,We.getBackendSrv)().fetch(e).pipe((0,ze.map)((({data:e})=>e)))}static getBackendDataSourceUrl(e){return`/api/datasources/${e}/resources`}testDatasource(){var e,t=this;return(e=function*(){const e=tt.reportsApi(t.id).pipe((0,ze.map)((e=>t.createTestDataSourceResponse(e?Qe.Success:Qe.Error))),(0,ze.catchError)((()=>(0,ze.of)(t.createTestDataSourceResponse(Qe.Error)))));return yield(0,ze.lastValueFrom)(e)},function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Je(i,n,o,a,s,"next",e)}function s(e){Je(i,n,o,a,s,"throw",e)}a(void 0)}))})()}query(e){const{scopedVars:t}=e,r=e.targets.map((r=>{const{dimensions:o,metrics:i,filters:a,sortBys:s,reportLink:l,refId:c}=r,{from:u,to:p}=e.range,d=Ze({},(0,n.omitBy)({dimensions:o,metrics:i,filters:a,sortBys:s},n.isEmpty)),m=(0,n.isEmpty)(t)?d:JSON.parse((0,We.getTemplateSrv)().replace(JSON.stringify(d),t));return(0,ze.forkJoin)([(0,We.getBackendSrv)().fetch({method:"POST",url:`${tt.getBackendDataSourceUrl(this.id)}/${tt.DATA}`,data:{body:m,from:u.toISOString(),to:p.toISOString()},params:{targetUrl:l},hideFromInspector:!1}),tt.discoveryApi(this.id,l||"")]).pipe((0,ze.map)((([{data:{data:e}},t])=>({data:[tt.convertToDataFrame(e,t,c,o)]}))))}));return(0,ze.forkJoin)([...r]).pipe((0,ze.map)((e=>({data:e.map((e=>e.data)).flat()}))))}static convertToDataFrame(e,{dimensions:r,metrics:o},i,a){const s=[...r,...o],l=new t.MutableDataFrame({fields:(0,n.uniq)(null==e?void 0:e.map((e=>Object.keys(e))).flat()).map((e=>{const t=s.find((({name:t})=>t===e)),r={name:e,refId:i};return t?(n=Ze({},r),o=null!=(o={type:tt.getFieldDataType(t)})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})),n):r;var n,o}))});if("variable-query"===i){l.fields.forEach((e=>{(null==a?void 0:a.includes(e.name))&&e.type!==t.FieldType.time&&(e.type=t.FieldType.string)}));const e=l.fields.filter((({type:e})=>e===t.FieldType.string)),r=null==a?void 0:a.find((t=>e.find((({name:e})=>e===t)))),n=e.find((e=>e.name===r));n&&(l.fields=l.fields.filter((({type:e})=>e!==t.FieldType.string)),l.fields.push(n))}null==e||e.forEach((e=>l.add(e)));const c=l.fields.find((e=>e.type===t.FieldType.time));if(c)for(let e=0;e<c.values.length;e++)c.values.set(e,c.values.get(e)*tt.MILLISECONDS_IN_SECOND);return l}createTestDataSourceResponse(e){return e===Qe.Error?{status:Qe.Error,message:"Data source test failed. Check credentials and try again."}:{status:Qe.Success,message:"Data source is working properly."}}static getFieldDataType({type:e}){return Ye.includes(e)?t.FieldType.time:e.toLowerCase()===t.FieldType.string?t.FieldType.string:t.FieldType.number}constructor(e){super(e),Ke(this,"instanceSettings",void 0),this.instanceSettings=e,this.variables=new et(this)}}Ke(tt,"DISCOVERY","discovery"),Ke(tt,"REPORTS","reports"),Ke(tt,"DATA","data"),Ke(tt,"MILLISECONDS_IN_SECOND",1e3),Ke(tt,"DISCOVERY_CACHE_RETURN_DELAY",100),Ke(tt,"cachedDiscoveryAPIMap",new Map);class rt{static getDataSourceParts(e){return e.replace("/reporting-api/v2/reports/","").split("/")}static getCascaderOptions(e){const t=e.reports.map((({reportLink:e})=>e)).map((e=>({reportLink:e,items:rt.getDataSourceParts(e)}))),r=(0,n.groupBy)(t,(({items:[e]})=>e)),o=Object.keys(r).map((e=>({[e]:(0,n.groupBy)(r[e],(({items:[,e]})=>e))})));return o.map((e=>Object.keys(e).map((t=>N({value:t,items:Object.keys(e[t]).map((r=>({value:r,items:e[t][r].map((({reportLink:e,items:[,,t]})=>({value:e,label:t})))})))}))))).flat()}}const nt=new t.DataSourcePlugin(tt).setConfigEditor((function({options:t,onOptionsChange:s}){const[l,c]=(0,o.useState)(!1),u=({target:{value:e}},r)=>{const n=k(C({},t.jsonData),{[r]:e});s(k(C({},t),{jsonData:n}))},{jsonData:{clientSecret:p,host:d,clientToken:m,accessToken:f}}=t;return i().createElement("div",{className:"gf-form-group"},i().createElement("div",{className:"credentials__container"},i().createElement(r.Field,{label:"Information",description:"Paste credentials here to auto fill form below"},i().createElement(r.TextArea,{className:"credentials__textarea",name:"credentialsTextArea",invalid:l,onChange:({target:{value:e}})=>{const r=e.split("\n").map((e=>e.trim().split(RegExp("\\s=\\s(.*)","s")))).map((([e,t])=>({[(0,n.camelCase)(e)]:t}))).reduce(((e,t)=>C({},e,t)),{}),o=Object.entries(r),i=o.length!==a.length||o.some((([e,t])=>!a.includes(e)||(0,n.isEmpty)(t)));if(c(i),!i){const e=C({},t.jsonData,r);s(k(C({},t),{jsonData:e}))}}}))),i().createElement("hr",null),i().createElement(r.InlineField,{label:"Akamai Client Secret",labelWidth:20},i().createElement(r.Input,{onChange:t=>u(t,e.ClientSecret),value:p||"",placeholder:"Enter client secret",width:60})),i().createElement(r.InlineField,{label:"Host",labelWidth:20},i().createElement(r.Input,{value:d||"",placeholder:"Enter host",width:60,onChange:t=>u(t,e.Host)})),i().createElement(r.InlineField,{label:"Access Token",labelWidth:20},i().createElement(r.Input,{value:f||"",placeholder:"Enter access token",width:60,onChange:t=>u(t,e.AccessToken)})),i().createElement(r.InlineField,{label:"Client Token",labelWidth:20},i().createElement(r.Input,{value:m||"",placeholder:"Enter client token",width:60,onChange:t=>u(t,e.ClientToken)})))})).setQueryEditor((function({query:e,onChange:t,onRunQuery:a,datasource:s}){const[l,c]=(0,o.useState)($e),[u,p]=(0,o.useState)(""),[d,m]=(0,o.useState)(!1),[f,y]=(0,o.useState)(!0),[g,h]=(0,o.useState)([]),v=t=>{e.reportLink=t,p(t||""),t&&(m(!0),tt.discoveryApi(s.id,t).subscribe({next:e=>c(e),complete:()=>m(!1)}))};return(0,o.useLayoutEffect)((()=>{const t=tt.reportsApi(s.id).subscribe({next:t=>{h(rt.getCascaderOptions(t)),v(e.reportLink||""),y(!1)},error:()=>{h([]),y(!1)}});return()=>t.unsubscribe()}),[s.id]),i().createElement(i().Fragment,null,f?i().createElement(i().Fragment,null,i().createElement(r.Icon,{name:"fa fa-spinner"})," Fetching..."):i().createElement(r.Cascader,{initialValue:u?rt.getDataSourceParts(u).join(" > "):"",placeholder:"Select report data source",allowCustomValue:!0,options:g,changeOnSelect:!1,onSelect:v,displayAllSelectedLevels:!0,separator:" > "}),i().createElement("hr",null),d||(0,n.isEmpty)(l.metrics)||(0,n.isEmpty)(l.dimensions)?d?i().createElement(i().Fragment,null,i().createElement(r.Icon,{name:"fa fa-spinner"})," Fetching..."):"":i().createElement(Ve,{model:l,query:e,onChange:t,onRunQuery:a,datasource:s}))}))})(),u})()));
//# sourceMappingURL=module.js.map