define(["@grafana/data","@grafana/ui","lodash","react","@emotion/react","@grafana/runtime","rxjs"],(e,t,r,n,o,i,a)=>(()=>{"use strict";var s={7:e=>{e.exports=t},88:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},89:e=>{e.exports=o},241:e=>{e.exports=r},269:e=>{e.exports=a},278:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r}).join("")},t.i=function(e,r,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);n&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},292:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},a=[],s=0;s<e.length;s++){var l=e[s],c=n.base?l[0]+n.base:l[0],u=i[c]||0,p="".concat(c," ").concat(u);i[c]=u+1;var d=r(p),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(m);else{var f=o(m,n);n.byIndex=s,t.splice(s,0,{identifier:p,updater:f,references:1})}a.push(p)}return a}function o(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=r(i[a]);t[s].references--}for(var l=n(e,o),c=0;c<i.length;c++){var u=r(i[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=l}}},383:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},429:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(942),o=r.n(n),i=r(278),a=r.n(i)()(o());a.push([e.id,".credentials__container {\n  height: 200px;\n  width: 640px;\n}\n\n.credentials__textarea {\n  height: 150px;\n}\n","",{version:3,sources:["webpack://./components/config-editor/ConfigEditor.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,YAAY;AACd;;AAEA;EACE,aAAa;AACf",sourcesContent:[".credentials__container {\n  height: 200px;\n  width: 640px;\n}\n\n.credentials__textarea {\n  height: 150px;\n}\n"],sourceRoot:""}]);const s=a},531:e=>{e.exports=i},587:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(942),o=r.n(n),i=r(278),a=r.n(i)()(o());a.push([e.id,".padding-left-20 {\n    padding-left: 20px;\n}\n","",{version:3,sources:["webpack://./styles/styles.css"],names:[],mappings:"AAAA;IACI,kBAAkB;AACtB",sourcesContent:[".padding-left-20 {\n    padding-left: 20px;\n}\n"],sourceRoot:""}]);const s=a},781:t=>{t.exports=e},884:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},893:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},942:e=>{e.exports=function(e){var t=e[1],r=e[3];if(!r)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),i="/*# ".concat(o," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},959:e=>{e.exports=n},997:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={id:e,exports:{}};return s[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nc=void 0;var u={};c.r(u),c.d(u,{plugin:()=>ut});var p,d=c(781),m=c(7),f=c(241),y=c(959),g=c.n(y);!function(e){e.ClientSecret="clientSecret",e.Host="host",e.AccessToken="accessToken",e.ClientToken="clientToken"}(p||(p={}));const h=["clientSecret","host","accessToken","clientToken"];var v=c(292),b=c.n(v),O=c(893),E=c.n(O),S=c(383),w=c.n(S),C=c(884),k=c.n(C),A=c(88),P=c.n(A),x=c(997),T=c.n(x),j=c(429),I={};function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){D(e,t,r[t])})}return e}function F(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}I.styleTagTransform=T(),I.setAttributes=k(),I.insert=w().bind(null,"head"),I.domAPI=E(),I.insertStyleElement=P(),b()(j.A,I),j.A&&j.A.locals&&j.A.locals;var N=c(587),M={};M.styleTagTransform=T(),M.setAttributes=k(),M.insert=w().bind(null,"head"),M.domAPI=E(),M.insertStyleElement=P(),b()(N.A,M),N.A&&N.A.locals&&N.A.locals;const R=e=>e,B=e=>e.map(({name:e})=>q(e)),L=(e=[],t=R)=>e.map(e=>q(e,t)),q=(e,t=R)=>({label:t(e),value:e}),U=e=>L([...Object.values(e)],H),H=e=>{const t=e.replace(/_/g," ").toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},G=({value:e="",label:t,items:r=[]})=>({value:e,label:null!=t?t:e,items:null==r?void 0:r.map(G)}),V=25;var W;!function(e){e.Dimension="Dimension",e.Metric="Metric"}(W||(W={}));const z=U(W),$=(0,f.groupBy)(z,"value");var X,Y;!function(e){e.InList="IN_LIST",e.NotInList="NOT_IN_LIST",e.MatchRegExp="MATCH_REGEXP",e.NotMatchRegExp="NOT_MATCH_REGEXP",e.BeginsWith="BEGINS_WITH",e.NotBeginsWith="NOT_BEGINS_WITH",e.EndsWith="ENDS_WITH",e.NotEndsWith="NOT_ENDS_WITH",e.Contains="CONTAINS",e.NotContains="NOT_CONTAINS",e.Exact="EXACT"}(X||(X={})),function(e){e.Text="TEXT",e.Enum="ENUM"}(Y||(Y={}));const Q=U(X),J=L(["IN_LIST","NOT_IN_LIST"],H);var K;!function(e){e.Equal="EQUAL",e.NotEqual="NOT_EQUAL",e.LessThan="LESS_THAN",e.GreaterThan="GREATER_THAN"}(K||(K={}));const Z=U(K);var ee;!function(e){e.Ascending="ASCENDING",e.Descending="DESCENDING"}(ee||(ee={}));const te=U(ee);function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){re(e,t,r[t])})}return e}function oe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ie({model:e,names:t,operators:r,multiExpressions:n,onChange:o}){const i=n?g().createElement(m.InlineField,null,g().createElement(m.TagsInput,{placeholder:"Expressions",width:50,tags:e.expressions,onChange:t=>{return o(oe(ne({},e),{expressions:(r=t,(0,f.uniq)(r.map(e=>e.split(",")).flat().filter(e=>!(0,f.isEmpty)(e))))}));var r}})):g().createElement(m.InlineField,null,g().createElement(m.Input,{placeholder:"Expression",width:50,value:(0,f.first)(e.expressions),onChange:t=>o(oe(ne({},e),{expressions:[t.target.value]}))}));return g().createElement(y.Fragment,null,g().createElement(m.InlineField,null,g().createElement(m.Select,{placeholder:"Name",isClearable:!1,options:t,width:V,value:e.name,onChange:t=>o(oe(ne({},e),{name:t}))})),g().createElement(m.InlineField,null,g().createElement(m.Select,{placeholder:"Operator",isClearable:!1,width:V,options:r,value:e.operator,onChange:t=>o(oe(ne({},e),{operator:t}))})),i)}class ae{static creteEmptyFilter(e){return{type:z[0],query:{name:e,operator:Q[0],expressions:[]}}}static creteEmptySortBy(e){return{type:z[0],query:{name:e,sortOrder:te[0]}}}static toValues(e){return e.map(({value:e})=>e).filter(e=>e)}static toFilterFormModels(e=[],t,r){return null==e?void 0:e.map(e=>{var n;const o=e.dimensionName||e.metricName,i=ae.guessFilterType(o,t,r);return i?{type:$[i][0],query:{name:o?q(o):void 0,operator:e.operator?q(e.operator,H):void 0,expressions:((null===(n=e.expressions)||void 0===n?void 0:n.length)?e.expressions:[e.expression]).filter(e=>!(0,f.isUndefined)(e)).map(e=>`${e}`)}}:{}}).filter(e=>!(0,f.isEmpty)(e))}static toSortBysFormModel(e=[],t,r){return null==e?void 0:e.map(e=>{const n=ae.guessFilterType(e.name,t,r);return n?{type:$[n][0],query:{name:e.name?q(e.name):void 0,sortOrder:e.sortOrder?q(e.sortOrder,H):void 0}}:{}}).filter(e=>!(0,f.isEmpty)(e))}static guessFilterType(e,t,r){if(!(0,f.isUndefined)(e))return t.includes(e)?W.Dimension:r.includes(e)?W.Metric:void 0}static toFilterQueries(e){return e.map(({type:e,query:{name:t,operator:r,expressions:n}})=>{const o={operator:null==r?void 0:r.value};return e.value===W.Dimension?((0,f.set)(o,"dimensionName",null==t?void 0:t.value),(0,f.set)(o,"expressions",ae.toExpressions(n))):e.value===W.Metric&&((0,f.set)(o,"metricName",null==t?void 0:t.value),(0,f.set)(o,"expression",ae.toExpression((0,f.first)(n)))),o})}static toExpressions(e=[]){return e.map(e=>ae.toExpression(e))}static toExpression(e=""){let t=Number(e);return isNaN(t)?e:t}static toSortByQueries(e){return e.map(({query:{name:e,sortOrder:t}})=>({name:null==e?void 0:e.value,sortOrder:null==t?void 0:t.value}))}static getDimensionsOperatorsOptions({query:{name:e}},t){const r=t.dimensions.find(t=>t.name===(null==e?void 0:e.value));return(null==r?void 0:r.filterType)===Y.Enum||(null==r?void 0:r.authorizable)?J:Q}static getIntersectedModelOptions(e,t){const r=e.filter(e=>ae.VARIABLE_REGEX.test(e));return[...(0,f.intersection)(e,t.map(({name:e})=>e)),...r||[]]}}var se,le,ce;function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ue(e,t,r[t])})}return e}function de(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function me({model:e,discoveryApiModel:t,dimensions:r,metrics:n,onChange:o}){var i;const a=function(e,t,r,n,o,i){switch(e){case W.Dimension:return g().createElement(ie,{model:n.query,names:t,operators:ae.getDimensionsOperatorsOptions(n,o),multiExpressions:!0,onChange:e=>i(de(pe({},n),{query:e}))});case W.Metric:return g().createElement(ie,{model:n.query,names:r,operators:Z,multiExpressions:!1,onChange:e=>i(de(pe({},n),{query:e}))});default:return g().createElement(m.InlineField,null,g().createElement("span",null,"Not implemented yet"))}}(null===(i=e.type)||void 0===i?void 0:i.value,r,n,e,t,o);return g().createElement(m.InlineFieldRow,{className:"padding-left-20"},g().createElement(m.InlineField,null,g().createElement(m.Select,{isClearable:!1,width:V,options:z,value:e.type,onChange:e=>{let t={};e.value===W.Dimension?t=ae.creteEmptyFilter(r[0]):e.value===W.Metric&&(t=ae.creteEmptyFilter(n[0])),o(de(pe({},t),{type:e}))}})),a)}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fe.apply(null,arguments)}function ye(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}ce=/\${.+}/gm,(le="VARIABLE_REGEX")in(se=ae)?Object.defineProperty(se,le,{value:ce,enumerable:!0,configurable:!0,writable:!0}):se[le]=ce;var ge=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,he=ye(function(e){return ge.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}),ve=c(89),be=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},Oe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Ee(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var Se=/[A-Z]|^ms/g,we=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ce=function(e){return 45===e.charCodeAt(1)},ke=function(e){return null!=e&&"boolean"!=typeof e},Ae=Ee(function(e){return Ce(e)?e:e.replace(Se,"-$&").toLowerCase()}),Pe=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(we,function(e,t,r){return Te={name:t,styles:r,next:Te},t})}return 1===Oe[e]||Ce(e)||"number"!=typeof t||0===t?t:t+"px"};function xe(e,t,r){if(null==r)return"";var n=r;if(void 0!==n.__emotion_styles)return n;switch(typeof r){case"boolean":return"";case"object":var o=r;if(1===o.anim)return Te={name:o.name,styles:o.styles,next:Te},o.name;var i=r;if(void 0!==i.styles){var a=i.next;if(void 0!==a)for(;void 0!==a;)Te={name:a.name,styles:a.styles,next:Te},a=a.next;return i.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=xe(e,t,r[o])+";";else for(var i in r){var a=r[i];if("object"!=typeof a){var s=a;null!=t&&void 0!==t[s]?n+=i+"{"+t[s]+"}":ke(s)&&(n+=Ae(i)+":"+Pe(i,s)+";")}else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=xe(e,t,a);switch(i){case"animation":case"animationName":n+=Ae(i)+":"+l+";";break;default:n+=i+"{"+l+"}"}}else for(var c=0;c<a.length;c++)ke(a[c])&&(n+=Ae(i)+":"+Pe(i,a[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var s=Te,l=r(e);return Te=s,xe(e,t,l)}}var c=r;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var Te,je=/label:\s*([^\s;{]+)\s*(;|$)/g,Ie=!!y.useInsertionEffect&&y.useInsertionEffect,De=Ie||function(e){return e()},_e=(Ie||y.useLayoutEffect,he),Fe=function(e){return"theme"!==e},Ne=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?_e:Fe},Me=function(e,t,r){var n;if(t){var o=t.shouldForwardProp;n=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof n&&r&&(n=e.__emotion_forwardProp),n},Re=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return be(t,r,n),De(function(){return function(e,t,r){be(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+n:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}(t,r,n)}),null},Be=function e(t,r){var n,o,i=t.__emotion_real===t,a=i&&t.__emotion_base||t;void 0!==r&&(n=r.label,o=r.target);var s=Me(t,r,i),l=s||Ne(a),c=!l("as");return function(){var u=arguments,p=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&p.push("label:"+n+";"),null==u[0]||void 0===u[0].raw)p.push.apply(p,u);else{p.push(u[0][0]);for(var d=u.length,m=1;m<d;m++)p.push(u[m],u[0][m])}var f=(0,ve.withEmotionCache)(function(e,t,r){var n,i,u,d,m=c&&e.as||a,f="",g=[],h=e;if(null==e.theme){for(var v in h={},e)h[v]=e[v];h.theme=y.useContext(ve.ThemeContext)}"string"==typeof e.className?(n=t.registered,i=g,u=e.className,d="",u.split(" ").forEach(function(e){void 0!==n[e]?i.push(n[e]+";"):e&&(d+=e+" ")}),f=d):null!=e.className&&(f=e.className+" ");var b=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,o="";Te=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,o+=xe(r,t,i)):o+=i[0];for(var a=1;a<e.length;a++)o+=xe(r,t,e[a]),n&&(o+=i[a]);je.lastIndex=0;for(var s,l="";null!==(s=je.exec(o));)l+="-"+s[1];var c=function(e){for(var t,r=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:Te}}(p.concat(g),t.registered,h);f+=t.key+"-"+b.name,void 0!==o&&(f+=" "+o);var O=c&&void 0===s?Ne(m):l,E={};for(var S in e)c&&"as"===S||O(S)&&(E[S]=e[S]);return E.className=f,E.ref=r,y.createElement(y.Fragment,null,y.createElement(Re,{cache:t,serialized:b,isStringTag:"string"==typeof m}),y.createElement(m,E))});return f.displayName=void 0!==n?n:"Styled("+("string"==typeof a?a:a.displayName||a.name||"Component")+")",f.defaultProps=t.defaultProps,f.__emotion_real=f,f.__emotion_base=a,f.__emotion_styles=p,f.__emotion_forwardProp=s,Object.defineProperty(f,"toString",{value:function(){return"."+o}}),f.withComponent=function(t,n){return e(t,fe({},r,n,{shouldForwardProp:Me(f,n,!0)})).apply(void 0,p)},f}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){Be[e]=Be(e)});const Le=Be.div`
    display: flex;
    align-items: center;
    height: 32px;
`;function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ue({fieldLabel:e,fieldTooltip:t,resource:r,rows:n,modelProvider:o,onChange:i,Editor:a}){return g().createElement(y.Fragment,null,g().createElement(m.InlineFieldRow,null,g().createElement(m.InlineField,{label:e,tooltip:t,labelWidth:V},g().createElement(Le,null,(null==n?void 0:n.length)?g().createElement(m.IconButton,{name:"trash-alt",tooltip:"Remove all",onClick:()=>i([])}):"",g().createElement(m.IconButton,{name:"plus-circle",tooltip:`Add new ${r}`,onClick:()=>i([...n,o()])})))),n.map((e,t)=>g().createElement(m.InlineFieldRow,{key:t},a(e,t,e=>((e,t)=>{i(n.map((r,n)=>n===t?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){qe(e,t,r[t])})}return e}({},r,e):r))})(e,t)),g().createElement(m.InlineField,null,g().createElement(Le,null,g().createElement(m.IconButton,{name:"minus-circle",tooltip:`Remove ${r}`,onClick:()=>(e=>{const t=[...n];t.splice(e,1),i(t)})(t)}))))))}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){He(e,t,r[t])})}return e}function Ve(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function We({model:e,names:t,onChange:r}){return g().createElement(y.Fragment,null,g().createElement(m.InlineField,null,g().createElement(m.Select,{placeholder:"Name",isClearable:!1,width:V,options:t,value:e.name,onChange:t=>r(Ve(Ge({},e),{name:t}))})),g().createElement(m.InlineField,null,g().createElement(m.Select,{placeholder:"Sort order",isClearable:!1,width:V,options:te,value:e.sortOrder,onChange:t=>r(Ve(Ge({},e),{sortOrder:t}))})))}function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ze(e,t,r[t])})}return e}function Xe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Ye({model:e,dimensions:t,metrics:r,onChange:n}){var o;const i=function(e,t,r,n,o){switch(e){case W.Dimension:return g().createElement(We,{model:n.query,names:t,onChange:e=>o(Xe($e({},n),{query:e}))});case W.Metric:return g().createElement(We,{model:n.query,names:r,onChange:e=>o(Xe($e({},n),{query:e}))});default:return g().createElement(m.InlineField,null,g().createElement("span",null,"Not implemented yet"))}}(null===(o=e.type)||void 0===o?void 0:o.value,t,r,e,n);return g().createElement(m.InlineFieldRow,{className:"padding-left-20"},g().createElement(m.InlineField,null,g().createElement(m.Select,{isClearable:!1,width:V,options:z,value:e.type,onChange:e=>{let o={};e.value===W.Dimension?o=ae.creteEmptySortBy(t[0]):e.value===W.Metric&&(o=ae.creteEmptySortBy(r[0])),n(Xe($e({},o),{type:e}))}})),i)}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Je({query:e,onChange:t,onRunQuery:r,model:n}){const{defaults:{defaultMetrics:o=[],defaultDimensions:i=[],defaultSortBys:a=[]}}=n,s=B(n.dimensions),l=i?L(i):[],c=B(n.metrics),u=o?L(o):[],p=ae.toValues(s),d=ae.toValues(c),h=a?ae.toSortBysFormModel(a,p,d):[],[v,b]=(0,y.useState)(n.dimensions?(0,f.isNil)(e.dimensions)?l:L(ae.getIntersectedModelOptions(e.dimensions,n.dimensions)):[]),[O,E]=(0,y.useState)(n.metrics?(0,f.isNil)(e.metrics)?u:L(ae.getIntersectedModelOptions(e.metrics,n.metrics)):[]),[S,w]=(0,y.useState)(n.metrics||n.dimensions?ae.toFilterFormModels(e.filters,p,d):[]),[C,k]=(0,y.useState)(n.metrics&&n.dimensions?(0,f.isNil)(e.sortBys)?h:ae.toSortBysFormModel(e.sortBys,p,d):[]),[A,P]=(0,y.useState)((0,f.isEmpty)(v)&&(0,f.isEmpty)(O)),[x,T]=(0,y.useState)(!e.dimensions&&!e.metrics),j=(e,t)=>{P((0,f.isEmpty)(e)&&(0,f.isEmpty)(t)),T(!1)};return g().createElement("div",null,x&&g().createElement(m.Alert,{title:"Default values",severity:"info"},g().createElement(m.VerticalGroup,null,"Default values have been set for the form since the panel was opened for the first time or data for query was not saved.")),g().createElement(m.InlineField,{label:"Dimensions",labelWidth:V,tooltip:"Array of dimensions for grouping results (i.e.['time5minutes', 'cpcode']). Maximum number of dimensions: 4."},g().createElement(m.MultiSelect,{isClearable:!0,width:50,options:s,value:v,allowCustomValue:!0,onChange:e=>{b(e),j(e,O)}})),g().createElement(m.InlineField,{label:"Metrics",labelWidth:V,tooltip:"Array of metrics requested (i.e.: ['edgeBytesSum', 'originHitsSum'])."},g().createElement(m.MultiSelect,{isClearable:!0,width:50,options:c,value:O,allowCustomValue:!0,onChange:e=>{E(e),j(v,e)}})),g().createElement(Ue,{fieldLabel:"Filters",fieldTooltip:"Filters used to narrow down the results of the data. Filters are specified in terms of dimensions or metrics.",resource:"Filter",rows:S,onChange:e=>{w(e),j(v,O)},modelProvider:()=>ae.creteEmptyFilter(s[0]),Editor:(e,t,r)=>g().createElement(me,{key:t,model:e,dimensions:s,metrics:c,discoveryApiModel:n,onChange:e=>r(e,t)})}),g().createElement(Ue,{fieldLabel:"Sort Bys",fieldTooltip:"Set sortBy settings for multiple columns. If not specified, the default values are used.",resource:"Sort By",rows:C,onChange:e=>{k(e),j(v,O)},modelProvider:()=>ae.creteEmptySortBy(v[0]),Editor:(e,t,r)=>g().createElement(Ye,{key:t,model:e,dimensions:v,metrics:O,onChange:e=>r(e,t)})}),g().createElement(m.InlineFieldRow,null,g().createElement(m.InlineField,null,g().createElement(m.Button,{fill:"outline",type:"reset",variant:"destructive",onClick:()=>{b([]),E([]),w([]),k([]),j([],[])}},"Clear")),g().createElement(m.InlineField,{disabled:A},g().createElement(m.Button,{type:"submit",variant:"primary",onClick:()=>{const n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Qe(e,t,r[t])})}return e}({},e);n.dimensions=ae.toValues(v),n.metrics=ae.toValues(O),n.filters=ae.toFilterQueries(S),n.sortBys=ae.toSortByQueries(C),t(n),r(),T(!1)}},"Apply")),g().createElement(m.InlineField,null,g().createElement(m.Button,{type:"reset",variant:"secondary",onClick:()=>{E(u),b(l),k(h),j(l,u)}},"Restore defaults"))))}var Ke=c(531),Ze=c(269);const et={metrics:[],dimensions:[],defaults:{},refId:""};var tt;!function(e){e.STRING="STRING",e.LONG="LONG",e.DOUBLE="DOUBLE",e.TIMESTAMP_SEC="TIMESTAMP_SEC",e.DATE_ISO8601="DATE_ISO8601",e.TIMESTAMP_MS="TIMESTAMP_MS"}(tt||(tt={}));const rt=["TIMESTAMP_SEC","DATE_ISO8601","TIMESTAMP_MS"];var nt;function ot(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){it(e,t,r[t])})}return e}!function(e){e.Success="success",e.Error="error"}(nt||(nt={}));class st extends d.DataSourceVariableSupport{getDefaultQuery(){return{reportLink:"",dimensions:[],metrics:[],filters:[],sortBys:[]}}getType(){return d.VariableSupportType.Custom}constructor({query:e,id:t}){super(),it(this,"query",void 0),it(this,"editor",{}),it(this,"id",void 0),this.query=e,this.id=t}}class lt extends Ke.DataSourceWithBackend{static discoveryApi(e,t){return lt.cachedDiscoveryAPIMap.has(t)?(0,Ze.of)(lt.cachedDiscoveryAPIMap.get(t)).pipe((0,Ze.delay)(lt.DISCOVERY_CACHE_RETURN_DELAY)):lt.makeBackendSrvCall({url:`${lt.getBackendDataSourceUrl(e)}/${lt.DISCOVERY}`,params:{targetUrl:t}}).pipe((0,Ze.tap)(e=>lt.cachedDiscoveryAPIMap.set(t,e)))}static reportsApi(e){return lt.makeBackendSrvCall({url:`${lt.getBackendDataSourceUrl(e)}/${lt.REPORTS}`})}static makeBackendSrvCall(e){return(0,Ke.getBackendSrv)().fetch(e).pipe((0,Ze.map)(({data:e})=>e))}static getBackendDataSourceUrl(e){return`/api/datasources/${e}/resources`}testDatasource(){var e,t=this;return(e=function*(){const e=lt.reportsApi(t.id).pipe((0,Ze.map)(e=>t.createTestDataSourceResponse(e?nt.Success:nt.Error)),(0,Ze.catchError)(()=>(0,Ze.of)(t.createTestDataSourceResponse(nt.Error))));return yield(0,Ze.lastValueFrom)(e)},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){ot(i,n,o,a,s,"next",e)}function s(e){ot(i,n,o,a,s,"throw",e)}a(void 0)})})()}query(e){const{scopedVars:t}=e,r=e.targets.map(r=>{const{dimensions:n,metrics:o,filters:i,sortBys:a,reportLink:s,refId:l}=r,{from:c,to:u}=e.range,p=at({},(0,f.omitBy)({dimensions:n,metrics:o,filters:i,sortBys:a},f.isEmpty)),d=(0,f.isEmpty)(t)?p:JSON.parse((0,Ke.getTemplateSrv)().replace(JSON.stringify(p),t));return(0,Ze.forkJoin)([(0,Ke.getBackendSrv)().fetch({method:"POST",url:`${lt.getBackendDataSourceUrl(this.id)}/${lt.DATA}`,data:{body:d,from:c.toISOString(),to:u.toISOString()},params:{targetUrl:s},hideFromInspector:!1}),lt.discoveryApi(this.id,s||"")]).pipe((0,Ze.map)(([{data:{data:e}},t])=>({data:[lt.convertToDataFrame(e,t,l,n)]})))});return(0,Ze.forkJoin)([...r]).pipe((0,Ze.map)(e=>({data:e.map(e=>e.data).flat()})))}static convertToDataFrame(e,{dimensions:t,metrics:r},n,o){const i=[...t,...r],a=new d.MutableDataFrame({fields:(0,f.uniq)(null==e?void 0:e.map(e=>Object.keys(e)).flat()).map(e=>{const t=i.find(({name:t})=>t===e),r={name:e,refId:n};return t?(o=at({},r),a=null!=(a={type:lt.getFieldDataType(t)})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o):r;var o,a})});if("variable-query"===n){a.fields.forEach(e=>{(null==o?void 0:o.includes(e.name))&&e.type!==d.FieldType.time&&(e.type=d.FieldType.string)});const e=a.fields.filter(({type:e})=>e===d.FieldType.string),t=null==o?void 0:o.find(t=>e.find(({name:e})=>e===t)),r=e.find(e=>e.name===t);r&&(a.fields=a.fields.filter(({type:e})=>e!==d.FieldType.string),a.fields.push(r))}null==e||e.forEach(e=>a.add(e));const s=a.fields.find(e=>e.type===d.FieldType.time);if(s)for(let e=0;e<s.values.length;e++)s.values.set(e,s.values.get(e)*lt.MILLISECONDS_IN_SECOND);return a}createTestDataSourceResponse(e){return e===nt.Error?{status:nt.Error,message:"Data source test failed. Check credentials and try again."}:{status:nt.Success,message:"Data source is working properly."}}static getFieldDataType({type:e}){return rt.includes(e)?d.FieldType.time:e.toLowerCase()===d.FieldType.string?d.FieldType.string:d.FieldType.number}constructor(e){super(e),it(this,"instanceSettings",void 0),this.instanceSettings=e,this.variables=new st(this)}}it(lt,"DISCOVERY","discovery"),it(lt,"REPORTS","reports"),it(lt,"DATA","data"),it(lt,"MILLISECONDS_IN_SECOND",1e3),it(lt,"DISCOVERY_CACHE_RETURN_DELAY",100),it(lt,"cachedDiscoveryAPIMap",new Map);class ct{static getDataSourceParts(e){return e.replace("/reporting-api/v2/reports/","").split("/")}static getCascaderOptions(e){const t=e.reports.map(({reportLink:e})=>e).map(e=>({reportLink:e,items:ct.getDataSourceParts(e)})),r=(0,f.groupBy)(t,({items:[e]})=>e),n=Object.keys(r).map(e=>({[e]:(0,f.groupBy)(r[e],({items:[,e]})=>e)}));return n.map(e=>Object.keys(e).map(t=>G({value:t,items:Object.keys(e[t]).map(r=>({value:r,items:e[t][r].map(({reportLink:e,items:[,,t]})=>({value:e,label:t}))}))}))).flat()}}const ut=new d.DataSourcePlugin(lt).setConfigEditor(function({options:e,onOptionsChange:t}){const r=e.secureJsonData||{},[n,o]=(0,y.useState)(!1),i=({target:{value:n}},o)=>{const i=F(_({},r),{[o]:n});t(F(_({},e),{secureJsonData:i}))},{clientSecret:a,host:s,clientToken:l,accessToken:c}=r;return g().createElement("div",{className:"gf-form-group"},g().createElement("div",{className:"credentials__container"},g().createElement(m.Field,{label:"Information",description:"Paste credentials here to auto fill form below"},g().createElement(m.TextArea,{className:"credentials__textarea",name:"credentialsTextArea",invalid:n,onChange:({target:{value:n}})=>{const i=n.split("\n").map(e=>e.trim().split(RegExp("\\s=\\s(.*)","s"))).map(([e,t])=>({[(0,f.camelCase)(e)]:t})).reduce((e,t)=>_({},e,t),{}),a=Object.entries(i),s=a.length!==h.length||a.some(([e,t])=>!h.includes(e)||(0,f.isEmpty)(t));if(o(s),!s){const n=_({},r,i);t(F(_({},e),{secureJsonData:n}))}}}))),g().createElement("hr",null),g().createElement(m.InlineField,{label:"Akamai Client Secret",labelWidth:20},g().createElement(m.Input,{onChange:e=>i(e,p.ClientSecret),value:a||"",placeholder:"Enter client secret",width:60})),g().createElement(m.InlineField,{label:"Host",labelWidth:20},g().createElement(m.Input,{value:s||"",placeholder:"Enter host",width:60,onChange:e=>i(e,p.Host)})),g().createElement(m.InlineField,{label:"Access Token",labelWidth:20},g().createElement(m.Input,{value:c||"",placeholder:"Enter access token",width:60,onChange:e=>i(e,p.AccessToken)})),g().createElement(m.InlineField,{label:"Client Token",labelWidth:20},g().createElement(m.Input,{value:l||"",placeholder:"Enter client token",width:60,onChange:e=>i(e,p.ClientToken)})))}).setQueryEditor(function({query:e,onChange:t,onRunQuery:r,datasource:n}){const[o,i]=(0,y.useState)(et),[a,s]=(0,y.useState)(""),[l,c]=(0,y.useState)(!1),[u,p]=(0,y.useState)(!0),[d,h]=(0,y.useState)([]),v=t=>{e.reportLink=t,s(t||""),t&&(c(!0),lt.discoveryApi(n.id,t).subscribe({next:e=>i(e),complete:()=>c(!1)}))};return(0,y.useLayoutEffect)(()=>{const t=lt.reportsApi(n.id).subscribe({next:t=>{h(ct.getCascaderOptions(t)),v(e.reportLink||""),p(!1)},error:()=>{h([]),p(!1)}});return()=>t.unsubscribe()},[n.id]),g().createElement(g().Fragment,null,u?g().createElement(g().Fragment,null,g().createElement(m.Icon,{name:"fa fa-spinner"})," Fetching..."):g().createElement(m.Cascader,{initialValue:a?ct.getDataSourceParts(a).join(" > "):"",placeholder:"Select report data source",allowCustomValue:!0,options:d,changeOnSelect:!1,onSelect:v,displayAllSelectedLevels:!0,separator:" > "}),g().createElement("hr",null),l||(0,f.isEmpty)(o.metrics)||(0,f.isEmpty)(o.dimensions)?l?g().createElement(g().Fragment,null,g().createElement(m.Icon,{name:"fa fa-spinner"})," Fetching..."):"":g().createElement(Je,{model:o,query:e,onChange:t,onRunQuery:r,datasource:n}))});return u})());
//# sourceMappingURL=module.js.map