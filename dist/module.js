define(["@grafana/data","@grafana/ui","lodash","react","@emotion/react","@grafana/runtime","rxjs"],((e,t,r,n,o,a,i)=>(()=>{"use strict";var s={429:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(942),o=r.n(n),a=r(278),i=r.n(a)()(o());i.push([e.id,".credentials__container {\n  height: 200px;\n  width: 640px;\n}\n\n.credentials__textarea {\n  height: 150px;\n}\n","",{version:3,sources:["webpack://./components/config-editor/ConfigEditor.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,YAAY;AACd;;AAEA;EACE,aAAa;AACf",sourcesContent:[".credentials__container {\n  height: 200px;\n  width: 640px;\n}\n\n.credentials__textarea {\n  height: 150px;\n}\n"],sourceRoot:""}]);const s=i},587:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(942),o=r.n(n),a=r(278),i=r.n(a)()(o());i.push([e.id,".padding-left-20 {\n    padding-left: 20px;\n}\n","",{version:3,sources:["webpack://./styles/styles.css"],names:[],mappings:"AAAA;IACI,kBAAkB;AACtB",sourcesContent:[".padding-left-20 {\n    padding-left: 20px;\n}\n"],sourceRoot:""}]);const s=i},278:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);n&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},942:e=>{e.exports=function(e){var t=e[1],r=e[3];if(!r)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),a="/*# ".concat(o," */");return[t].concat([a]).join("\n")}return[t].join("\n")}},292:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var a={},i=[],s=0;s<e.length;s++){var l=e[s],c=n.base?l[0]+n.base:l[0],u=a[c]||0,p="".concat(c," ").concat(u);a[c]=u+1;var d=r(p),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(m);else{var f=o(m,n);n.byIndex=s,t.splice(s,0,{identifier:p,updater:f,references:1})}i.push(p)}return i}function o(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var a=n(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=r(a[i]);t[s].references--}for(var l=n(e,o),c=0;c<a.length;c++){var u=r(a[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=l}}},383:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},88:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},884:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},893:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},997:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},89:e=>{e.exports=o},781:t=>{t.exports=e},531:e=>{e.exports=a},7:e=>{e.exports=t},241:e=>{e.exports=r},959:e=>{e.exports=n},269:e=>{e.exports=i}},l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={id:e,exports:{}};return s[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.nc=void 0;var u={};return(()=>{c.r(u),c.d(u,{plugin:()=>Ze});var e,t=c(781),r=c(7),n=c(241),o=c(959),a=c.n(o);!function(e){e.ClientSecret="clientSecret",e.Host="host",e.AccessToken="accessToken",e.ClientToken="clientToken"}(e||(e={}));const i=["clientSecret","host","accessToken","clientToken"];var s=c(292),l=c.n(s),p=c(893),d=c.n(p),m=c(383),f=c.n(m),y=c(884),g=c.n(y),h=c(88),v=c.n(h),b=c(997),O=c.n(b),E=c(429),S={};function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){w(e,t,r[t])}))}return e}function k(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}S.styleTagTransform=O(),S.setAttributes=g(),S.insert=f().bind(null,"head"),S.domAPI=d(),S.insertStyleElement=v(),l()(E.A,S),E.A&&E.A.locals&&E.A.locals;var P=c(587),x={};x.styleTagTransform=O(),x.setAttributes=g(),x.insert=f().bind(null,"head"),x.domAPI=d(),x.insertStyleElement=v(),l()(P.A,x),P.A&&P.A.locals&&P.A.locals;const A=e=>e,j=e=>e.map((({name:e})=>I(e))),T=(e=[],t=A)=>e.map((e=>I(e,t))),I=(e,t=A)=>({label:t(e),value:e}),D=e=>T([...Object.values(e)],F),F=e=>{const t=e.replace(/_/g," ").toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},_=e=>(0,n.uniq)(e.map((e=>e.split(","))).flat().filter((e=>!(0,n.isEmpty)(e)))),M=({value:e,label:t,items:r=[]})=>({value:e,label:null!=t?t:e,items:null==r?void 0:r.map(M)}),R=25,N=50;var B;!function(e){e.Dimension="Dimension",e.Metric="Metric"}(B||(B={}));const L=D(B),q=(0,n.groupBy)(L,"value");var U,H;!function(e){e.InList="IN_LIST",e.RegExp="REGEXP",e.BeginsWith="BEGINS_WITH",e.EndsWith="ENDS_WITH",e.Partial="PARTIAL",e.Exact="EXACT"}(U||(U={})),function(e){e.Text="TEXT",e.Enum="ENUM"}(H||(H={}));const V=D(U),G=T(["IN_LIST"],F);var W;!function(e){e.Equal="EQUAL",e.NotEqual="NOT_EQUAL",e.LessThan="LESS_THAN",e.GreaterThan="GREATER_THAN"}(W||(W={}));const z=D(W);var Y;!function(e){e.Ascending="ASCENDING",e.Descending="DESCENDING"}(Y||(Y={}));const $=D(Y);function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Q(e,t,r[t])}))}return e}function J(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function K({model:e,names:t,operators:i,multiExpressions:s,onChange:l}){const c=s?a().createElement(r.InlineField,null,a().createElement(r.TagsInput,{placeholder:"Expressions",width:N,tags:e.expressions,onChange:t=>l(J(X({},e),{expressions:_(t)}))})):a().createElement(r.InlineField,null,a().createElement(r.Input,{placeholder:"Expression",width:N,value:(0,n.first)(e.expressions),onChange:t=>l(J(X({},e),{expressions:[t.target.value]}))}));return a().createElement(o.Fragment,null,a().createElement(r.InlineField,null,a().createElement(r.Select,{placeholder:"Name",isClearable:!1,options:t,width:R,value:e.name,onChange:t=>l(J(X({},e),{name:t}))})),a().createElement(r.InlineField,null,a().createElement(r.Select,{placeholder:"Operator",isClearable:!1,width:R,options:i,value:e.operator,onChange:t=>l(J(X({},e),{operator:t}))})),c)}class Z{static creteEmptyFilter(e){return{type:L[0],query:{name:e,operator:V[0],expressions:[]}}}static creteEmptySortBy(e){return{type:L[0],query:{name:e,sortOrder:$[0]}}}static toValues(e){return e.map((({value:e})=>e)).filter((e=>e))}static toFilterFormModels(e=[],t,r){return null==e?void 0:e.map((e=>{var o;const a=Z.guessFilterType(e.name,t,r);return a?{type:q[a][0],query:{name:e.name?I(e.name):void 0,operator:e.operator?I(e.operator,F):void 0,expressions:((null===(o=e.expressions)||void 0===o?void 0:o.length)?e.expressions:[e.expression]).filter((e=>!(0,n.isUndefined)(e))).map((e=>`${e}`))}}:{}})).filter((e=>!(0,n.isEmpty)(e)))}static toSortBysFormModel(e=[],t,r){return null==e?void 0:e.map((e=>{const n=Z.guessFilterType(e.name,t,r);return n?{type:q[n][0],query:{name:e.name?I(e.name):void 0,sortOrder:e.sortOrder?I(e.sortOrder,F):void 0}}:{}})).filter((e=>!(0,n.isEmpty)(e)))}static guessFilterType(e,t,r){if(!(0,n.isUndefined)(e))return t.includes(e)?B.Dimension:r.includes(e)?B.Metric:void 0}static toFilterQueries(e){return e.map((({type:e,query:{name:t,operator:r,expressions:o}})=>{const a={operator:null==r?void 0:r.value};return e.value===B.Dimension?((0,n.set)(a,"dimensionName",null==t?void 0:t.value),(0,n.set)(a,"expressions",Z.toExpressions(o))):e.value===B.Metric&&((0,n.set)(a,"metricName",null==t?void 0:t.value),(0,n.set)(a,"expression",Z.toExpression((0,n.first)(o)))),a}))}static toExpressions(e=[]){return e.map((e=>Z.toExpression(e)))}static toExpression(e=""){let t=Number(e);return isNaN(t)?e:t}static toSortByQueries(e){return e.map((({query:{name:e,sortOrder:t}})=>({name:null==e?void 0:e.value,sortOrder:null==t?void 0:t.value})))}static getDimensionsOperatorsOptions({query:{name:e}},t){const r=t.dimensions.find((t=>t.name===(null==e?void 0:e.value)));return(null==r?void 0:r.filterType)===H.Enum||(null==r?void 0:r.authorizable)?G:V}static getIntersectedModelOptions(e,t){return(0,n.intersection)(e,t.map((({name:e})=>e)))}}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ee(e,t,r[t])}))}return e}function re(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function ne({model:e,discoveryApiModel:t,dimensions:n,metrics:o,onChange:i}){var s;const l=function(e,t,n,o,i,s){switch(e){case B.Dimension:return a().createElement(K,{model:o.query,names:t,operators:Z.getDimensionsOperatorsOptions(o,i),multiExpressions:!0,onChange:e=>s(re(te({},o),{query:e}))});case B.Metric:return a().createElement(K,{model:o.query,names:n,operators:z,multiExpressions:!1,onChange:e=>s(re(te({},o),{query:e}))});default:return a().createElement(r.InlineField,null,a().createElement("span",null,"Not implemented yet"))}}(null===(s=e.type)||void 0===s?void 0:s.value,n,o,e,t,i);return a().createElement(r.InlineFieldRow,{className:"padding-left-20"},a().createElement(r.InlineField,null,a().createElement(r.Select,{isClearable:!1,width:R,options:L,value:e.type,onChange:e=>{let t={};e.value===B.Dimension?t=Z.creteEmptyFilter(n[0]):e.value===B.Metric&&(t=Z.creteEmptyFilter(o[0])),i(re(te({},t),{type:e}))}})),l)}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oe.apply(this,arguments)}function ae(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var ie=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,se=ae((function(e){return ie.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),le=c(89),ce=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},ue={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pe=/[A-Z]|^ms/g,de=/_EMO_([^_]+?)_([^]*?)_EMO_/g,me=function(e){return 45===e.charCodeAt(1)},fe=function(e){return null!=e&&"boolean"!=typeof e},ye=ae((function(e){return me(e)?e:e.replace(pe,"-$&").toLowerCase()})),ge=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(de,(function(e,t,r){return ve={name:t,styles:r,next:ve},t}))}return 1===ue[e]||me(e)||"number"!=typeof t||0===t?t:t+"px"};function he(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return ve={name:r.name,styles:r.styles,next:ve},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)ve={name:n.name,styles:n.styles,next:ve},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=he(e,t,r[o])+";";else for(var a in r){var i=r[a];if("object"!=typeof i)null!=t&&void 0!==t[i]?n+=a+"{"+t[i]+"}":fe(i)&&(n+=ye(a)+":"+ge(a,i)+";");else if(!Array.isArray(i)||"string"!=typeof i[0]||null!=t&&void 0!==t[i[0]]){var s=he(e,t,i);switch(a){case"animation":case"animationName":n+=ye(a)+":"+s+";";break;default:n+=a+"{"+s+"}"}}else for(var l=0;l<i.length;l++)fe(i[l])&&(n+=ye(a)+":"+ge(a,i[l])+";")}return n}(e,t,r);case"function":if(void 0!==e){var o=ve,a=r(e);return ve=o,he(e,t,a)}}if(null==t)return r;var i=t[r];return void 0!==i?i:r}var ve,be=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Oe=!!o.useInsertionEffect&&o.useInsertionEffect,Ee=Oe||function(e){return e()},Se=(Oe||o.useLayoutEffect,se),we=function(e){return"theme"!==e},Ce=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?Se:we},ke=function(e,t,r){var n;if(t){var o=t.shouldForwardProp;n=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof n&&r&&(n=e.__emotion_forwardProp),n},Pe=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return ce(t,r,n),Ee((function(){return function(e,t,r){ce(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+n:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}(t,r,n)})),null},xe=function e(t,r){var n,a,i=t.__emotion_real===t,s=i&&t.__emotion_base||t;void 0!==r&&(n=r.label,a=r.target);var l=ke(t,r,i),c=l||Ce(s),u=!c("as");return function(){var p=arguments,d=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&d.push("label:"+n+";"),null==p[0]||void 0===p[0].raw)d.push.apply(d,p);else{d.push(p[0][0]);for(var m=p.length,f=1;f<m;f++)d.push(p[f],p[0][f])}var y=(0,le.withEmotionCache)((function(e,t,r){var n,i,p,m,f=u&&e.as||s,y="",g=[],h=e;if(null==e.theme){for(var v in h={},e)h[v]=e[v];h.theme=o.useContext(le.ThemeContext)}"string"==typeof e.className?(n=t.registered,i=g,p=e.className,m="",p.split(" ").forEach((function(e){void 0!==n[e]?i.push(n[e]+";"):m+=e+" "})),y=m):null!=e.className&&(y=e.className+" ");var b=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,o="";ve=void 0;var a=e[0];null==a||void 0===a.raw?(n=!1,o+=he(r,t,a)):o+=a[0];for(var i=1;i<e.length;i++)o+=he(r,t,e[i]),n&&(o+=a[i]);be.lastIndex=0;for(var s,l="";null!==(s=be.exec(o));)l+="-"+s[1];var c=function(e){for(var t,r=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:ve}}(d.concat(g),t.registered,h);y+=t.key+"-"+b.name,void 0!==a&&(y+=" "+a);var O=u&&void 0===l?Ce(f):c,E={};for(var S in e)u&&"as"===S||O(S)&&(E[S]=e[S]);return E.className=y,E.ref=r,o.createElement(o.Fragment,null,o.createElement(Pe,{cache:t,serialized:b,isStringTag:"string"==typeof f}),o.createElement(f,E))}));return y.displayName=void 0!==n?n:"Styled("+("string"==typeof s?s:s.displayName||s.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=s,y.__emotion_styles=d,y.__emotion_forwardProp=l,Object.defineProperty(y,"toString",{value:function(){return"."+a}}),y.withComponent=function(t,n){return e(t,oe({},r,n,{shouldForwardProp:ke(y,n,!0)})).apply(void 0,d)},y}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){xe[e]=xe(e)}));const Ae=xe.div`
    display: flex;
    align-items: center;
    height: 32px;
`;function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te({fieldLabel:e,fieldTooltip:t,resource:n,rows:i,modelProvider:s,onChange:l,Editor:c}){return a().createElement(o.Fragment,null,a().createElement(r.InlineFieldRow,null,a().createElement(r.InlineField,{label:e,tooltip:t,labelWidth:R},a().createElement(Ae,null,(null==i?void 0:i.length)?a().createElement(r.IconButton,{name:"trash-alt",tooltip:"Remove all",onClick:()=>l([])}):"",a().createElement(r.IconButton,{name:"plus-circle",tooltip:`Add new ${n}`,onClick:()=>l([...i,s()])})))),i.map(((e,t)=>a().createElement(r.InlineFieldRow,{key:t},c(e,t,(e=>((e,t)=>{l(i.map(((r,n)=>n===t?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){je(e,t,r[t])}))}return e}({},r,e):r)))})(e,t))),a().createElement(r.InlineField,null,a().createElement(Ae,null,a().createElement(r.IconButton,{name:"minus-circle",tooltip:`Remove ${n}`,onClick:()=>(e=>{const t=[...i];t.splice(e,1),l(t)})(t)})))))))}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ie(e,t,r[t])}))}return e}function Fe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function _e({model:e,names:t,onChange:n}){return a().createElement(o.Fragment,null,a().createElement(r.InlineField,null,a().createElement(r.Select,{placeholder:"Name",isClearable:!1,width:R,options:t,value:e.name,onChange:t=>n(Fe(De({},e),{name:t}))})),a().createElement(r.InlineField,null,a().createElement(r.Select,{placeholder:"Sort order",isClearable:!1,width:R,options:$,value:e.sortOrder,onChange:t=>n(Fe(De({},e),{sortOrder:t}))})))}function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Me(e,t,r[t])}))}return e}function Ne(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Be({model:e,dimensions:t,metrics:n,onChange:o}){var i;const s=function(e,t,n,o,i){switch(e){case B.Dimension:return a().createElement(_e,{model:o.query,names:t,onChange:e=>i(Ne(Re({},o),{query:e}))});case B.Metric:return a().createElement(_e,{model:o.query,names:n,onChange:e=>i(Ne(Re({},o),{query:e}))});default:return a().createElement(r.InlineField,null,a().createElement("span",null,"Not implemented yet"))}}(null===(i=e.type)||void 0===i?void 0:i.value,t,n,e,o);return a().createElement(r.InlineFieldRow,{className:"padding-left-20"},a().createElement(r.InlineField,null,a().createElement(r.Select,{isClearable:!1,width:R,options:L,value:e.type,onChange:e=>{let r={};e.value===B.Dimension?r=Z.creteEmptySortBy(t[0]):e.value===B.Metric&&(r=Z.creteEmptySortBy(n[0])),o(Ne(Re({},r),{type:e}))}})),s)}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe({query:e,onChange:t,onRunQuery:i,model:s}){const{defaults:{defaultMetrics:l=[],defaultDimensions:c=[],defaultSortBys:u=[]}}=s,p=j(s.dimensions),d=c?T(c):[],m=j(s.metrics),f=l?T(l):[],y=Z.toValues(p),g=Z.toValues(m),h=u?Z.toSortBysFormModel(u,y,g):[],[v,b]=(0,o.useState)(s.dimensions?(0,n.isNil)(e.dimensions)?d:T(Z.getIntersectedModelOptions(e.dimensions,s.dimensions)):[]),[O,E]=(0,o.useState)(s.metrics?(0,n.isNil)(e.metrics)?f:T(Z.getIntersectedModelOptions(e.metrics,s.metrics)):[]),[S,w]=(0,o.useState)(s.metrics&&s.dimensions?Z.toFilterFormModels(e.filters,y,g):[]),[C,k]=(0,o.useState)(s.metrics&&s.dimensions?(0,n.isNil)(e.sortBys)?h:Z.toSortBysFormModel(e.sortBys,y,g):[]),[P,x]=(0,o.useState)((0,n.isEmpty)(v)&&(0,n.isEmpty)(O)),[A,I]=(0,o.useState)(!e.dimensions&&!e.metrics),D=(e,t)=>{x((0,n.isEmpty)(e)&&(0,n.isEmpty)(t)),I(!1)};return a().createElement("div",null,A&&a().createElement(r.Alert,{title:"Default values",severity:"info"},a().createElement(r.VerticalGroup,null,"Default values have been set for the form since the panel was opened for the first time or data for query was not saved.")),a().createElement(r.InlineField,{label:"Dimensions",labelWidth:R,tooltip:"Array of dimensions for grouping results (i.e.['time5minutes', 'cpcode']). Maximum number of dimensions: 4."},a().createElement(r.MultiSelect,{isClearable:!0,width:N,options:p,value:v,allowCustomValue:!0,onChange:e=>{b(e),D(e,O)}})),a().createElement(r.InlineField,{label:"Metrics",labelWidth:R,tooltip:"Array of metrics requested (i.e.: ['edgeBytesSum', 'originHitsSum'])."},a().createElement(r.MultiSelect,{isClearable:!0,width:N,options:m,value:O,allowCustomValue:!0,onChange:e=>{E(e),D(v,e)}})),a().createElement(Te,{fieldLabel:"Filters",fieldTooltip:"Filters used to narrow down the results of the data. Filters are specified in terms of dimensions or metrics.",resource:"Filter",rows:S,onChange:e=>{w(e),D(v,O)},modelProvider:()=>Z.creteEmptyFilter(p[0]),Editor:(e,t,r)=>a().createElement(ne,{key:t,model:e,dimensions:p,metrics:m,discoveryApiModel:s,onChange:e=>r(e,t)})}),a().createElement(Te,{fieldLabel:"Sort Bys",fieldTooltip:"Set sortBy settings for multiple columns. If not specified, the default values are used.",resource:"Sort By",rows:C,onChange:e=>{k(e),D(v,O)},modelProvider:()=>Z.creteEmptySortBy(v[0]),Editor:(e,t,r)=>a().createElement(Be,{key:t,model:e,dimensions:v,metrics:O,onChange:e=>r(e,t)})}),a().createElement(r.InlineFieldRow,null,a().createElement(r.InlineField,null,a().createElement(r.Button,{fill:"outline",type:"reset",variant:"destructive",onClick:()=>{b([]),E([]),w([]),k([]),D([],[])}},"Clear")),a().createElement(r.InlineField,{disabled:P},a().createElement(r.Button,{type:"submit",variant:"primary",onClick:()=>{const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Le(e,t,r[t])}))}return e}({},e);r.dimensions=Z.toValues(v),r.metrics=Z.toValues(O),r.filters=Z.toFilterQueries(S),r.sortBys=Z.toSortByQueries(C),t(r),i(),I(!1)}},"Apply")),a().createElement(r.InlineField,null,a().createElement(r.Button,{type:"reset",variant:"secondary",onClick:()=>{E(f),b(d),k(h),D(d,f)}},"Restore defaults"))))}var Ue=c(531),He=c(269);const Ve={metrics:[],dimensions:[],defaults:{},refId:""};var Ge;!function(e){e.STRING="STRING",e.LONG="LONG",e.DOUBLE="DOUBLE",e.TIMESTAMP_SEC="TIMESTAMP_SEC",e.DATE_ISO8601="DATE_ISO8601",e.TIMESTAMP_MS="TIMESTAMP_MS"}(Ge||(Ge={}));const We=["TIMESTAMP_SEC","DATE_ISO8601","TIMESTAMP_MS"];var ze;function Ye(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){$e(e,t,r[t])}))}return e}!function(e){e.Success="success",e.Error="error"}(ze||(ze={}));class Xe extends t.DataSourceVariableSupport{getDefaultQuery(){return{reportLink:"",dimensions:[],metrics:[],filters:[],sortBys:[]}}}class Je extends Ue.DataSourceWithBackend{static discoveryApi(e,t){return Je.cachedDiscoveryAPIMap.has(t)?(0,He.of)(Je.cachedDiscoveryAPIMap.get(t)).pipe((0,He.delay)(Je.DISCOVERY_CACHE_RETURN_DELAY)):Je.makeBackendSrvCall({url:`${Je.getBackendDataSourceUrl(e)}/${Je.DISCOVERY}`,params:{targetUrl:t}}).pipe((0,He.tap)((e=>Je.cachedDiscoveryAPIMap.set(t,e))))}static reportsApi(e){return Je.makeBackendSrvCall({url:`${Je.getBackendDataSourceUrl(e)}/${Je.REPORTS}`})}static makeBackendSrvCall(e){return(0,Ue.getBackendSrv)().fetch(e).pipe((0,He.map)((({data:e})=>e)))}static getBackendDataSourceUrl(e){return`/api/datasources/${e}/resources`}testDatasource(){var e,t=this;return(e=function*(){const e=Je.reportsApi(t.id).pipe((0,He.map)((e=>t.createTestDataSourceResponse(e?ze.Success:ze.Error))),(0,He.catchError)((()=>(0,He.of)(t.createTestDataSourceResponse(ze.Error)))));return yield(0,He.lastValueFrom)(e)},function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ye(a,n,o,i,s,"next",e)}function s(e){Ye(a,n,o,i,s,"throw",e)}i(void 0)}))})()}query(e){const{scopedVars:t}=e,r=e.targets.map((r=>{const{dimensions:o,metrics:a,filters:i,sortBys:s,reportLink:l,refId:c}=r,{from:u,to:p}=e.range,d=Qe({},(0,n.omitBy)({dimensions:o,metrics:a,filters:i,sortBys:s},n.isEmpty)),m=(0,n.isEmpty)(t)?d:JSON.parse((0,Ue.getTemplateSrv)().replace(JSON.stringify(d),t));return(0,He.forkJoin)([(0,Ue.getBackendSrv)().fetch({method:"POST",url:`${Je.getBackendDataSourceUrl(this.id)}/${Je.DATA}`,data:{body:m,from:u.toISOString(),to:p.toISOString()},params:{targetUrl:l},hideFromInspector:!1}),Je.discoveryApi(this.id,l||"")]).pipe((0,He.map)((([{data:{data:e}},t])=>({data:[this.convertToDataFrame(e,t,c,o)]}))))}));return(0,He.forkJoin)([...r]).pipe((0,He.map)((e=>({data:e.map((e=>e.data)).flat()}))))}convertToDataFrame(e,{dimensions:r,metrics:o},a,i){const s=[...r,...o],l=new t.MutableDataFrame({fields:(0,n.uniq)(null==e?void 0:e.map((e=>Object.keys(e))).flat()).map((e=>{const t=s.find((({name:t})=>t===e)),r={name:e,refId:a};return t?(n=Qe({},r),o=null!=(o={type:this.getFieldDataType(t)})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})),n):r;var n,o}))});if("variable-query"===a){l.fields.forEach((e=>{(null==i?void 0:i.includes(e.name))&&e.type!==t.FieldType.time&&(e.type=t.FieldType.string)}));const e=l.fields.filter((({type:e})=>e===t.FieldType.string)),r=null==i?void 0:i.find((t=>e.find((({name:e})=>e===t)))),n=e.find((e=>e.name===r));n&&(l.fields=l.fields.filter((({type:e})=>e!==t.FieldType.string)),l.fields.push(n))}null==e||e.forEach((e=>l.add(e)));const c=l.fields.find((e=>e.type===t.FieldType.time));return c&&(c.values=c.values.map((e=>e*Je.MILLISECONDS_IN_SECOND))),l}createTestDataSourceResponse(e){return e===ze.Error?{status:ze.Error,message:"Data source test failed. Check credentials and try again."}:{status:ze.Success,message:"Data source is working properly."}}getFieldDataType({type:e}){return We.includes(e)?t.FieldType.time:e.toLowerCase()===t.FieldType.string?t.FieldType.string:t.FieldType.number}constructor(e){super(e),$e(this,"instanceSettings",void 0),this.instanceSettings=e,this.variables=new Xe}}$e(Je,"DISCOVERY","discovery"),$e(Je,"REPORTS","reports"),$e(Je,"DATA","data"),$e(Je,"MILLISECONDS_IN_SECOND",1e3),$e(Je,"DISCOVERY_CACHE_RETURN_DELAY",100),$e(Je,"cachedDiscoveryAPIMap",new Map);class Ke{static getDataSourceParts(e){return e.replace("/reporting-api/v2/reports/","").split("/")}static getCascaderOptions(e){const t=e.reports.map((({reportLink:e})=>e)).map((e=>({reportLink:e,items:Ke.getDataSourceParts(e)}))),r=(0,n.groupBy)(t,(({items:[e]})=>e));return Object.keys(r).map((e=>({[e]:(0,n.groupBy)(r[e],(({items:[,e]})=>e))}))).map((e=>Object.keys(e).map((t=>M({value:t,items:Object.keys(e[t]).map((r=>({value:r,items:e[t][r].map((({reportLink:e,items:[,,t]})=>({value:e,label:t})))})))}))))).flat()}}const Ze=new t.DataSourcePlugin(Je).setConfigEditor((function({options:t,onOptionsChange:s}){const[l,c]=(0,o.useState)(!1),u=({target:{value:e}},r)=>{const n=k(C({},t.jsonData),{[r]:e});s(k(C({},t),{jsonData:n}))},{jsonData:{clientSecret:p,host:d,clientToken:m,accessToken:f}}=t;return a().createElement("div",{className:"gf-form-group"},a().createElement("div",{className:"credentials__container"},a().createElement(r.Field,{label:"Information",description:"Paste credentials here to auto fill form below"},a().createElement(r.TextArea,{className:"credentials__textarea",name:"credentialsTextArea",invalid:l,onChange:({target:{value:e}})=>{const r=e.split("\n").map((e=>e.trim().split(RegExp("\\s=\\s(.*)","s")))).map((([e,t])=>({[(0,n.camelCase)(e)]:t}))).reduce(((e,t)=>C({},e,t)),{}),o=Object.entries(r),a=o.length!==i.length||o.some((([e,t])=>!i.includes(e)||(0,n.isEmpty)(t)));if(c(a),!a){const e=C({},t.jsonData,r);s(k(C({},t),{jsonData:e}))}}}))),a().createElement("hr",null),a().createElement(r.InlineField,{label:"Akamai Client Secret",labelWidth:20},a().createElement(r.Input,{onChange:t=>u(t,e.ClientSecret),value:p||"",placeholder:"Enter client secret",width:60})),a().createElement(r.InlineField,{label:"Host",labelWidth:20},a().createElement(r.Input,{value:d||"",placeholder:"Enter host",width:60,onChange:t=>u(t,e.Host)})),a().createElement(r.InlineField,{label:"Access Token",labelWidth:20},a().createElement(r.Input,{value:f||"",placeholder:"Enter access token",width:60,onChange:t=>u(t,e.AccessToken)})),a().createElement(r.InlineField,{label:"Client Token",labelWidth:20},a().createElement(r.Input,{value:m||"",placeholder:"Enter client token",width:60,onChange:t=>u(t,e.ClientToken)})))})).setQueryEditor((function({query:e,onChange:t,onRunQuery:i,datasource:s}){const[l,c]=(0,o.useState)(Ve),[u,p]=(0,o.useState)(""),[d,m]=(0,o.useState)(!1),[f,y]=(0,o.useState)(!0),[g,h]=(0,o.useState)([]),v=t=>{e.reportLink=t,p(t||""),t&&(m(!0),Je.discoveryApi(s.id,t).subscribe({next:e=>c(e),complete:()=>m(!1)}))};return(0,o.useLayoutEffect)((()=>{const t=Je.reportsApi(s.id).subscribe({next:t=>{h(Ke.getCascaderOptions(t)),v(e.reportLink||""),y(!1)},error:()=>{h([]),y(!1)}});return()=>t.unsubscribe()}),[s.id]),a().createElement(a().Fragment,null,f?a().createElement(a().Fragment,null,a().createElement(r.Icon,{name:"fa fa-spinner"})," Fetching..."):a().createElement(r.Cascader,{initialValue:u?Ke.getDataSourceParts(u).join(" > "):"",placeholder:"Select report data source",allowCustomValue:!0,options:g,changeOnSelect:!1,onSelect:v,displayAllSelectedLevels:!0,separator:" > "}),a().createElement("hr",null),d||(0,n.isEmpty)(l.metrics)||(0,n.isEmpty)(l.dimensions)?d?a().createElement(a().Fragment,null,a().createElement(r.Icon,{name:"fa fa-spinner"})," Fetching..."):"":a().createElement(qe,{model:l,query:e,onChange:t,onRunQuery:i,datasource:s}))}))})(),u})()));
//# sourceMappingURL=module.js.map